---
layout: base
---


<section class="post-list">
  {%- assign posts_grouped = site.posts | group_by_exp: 'p', 'p.date | date: "%Y-%m-%d"' -%}
  {%- assign posts_grouped = posts_grouped | sort: 'name' | reverse -%}
  {%- assign posts_sorted = '' | split: '' -%}
  {%- for group in posts_grouped -%}
    {%- assign ordered_posts = group.items | where_exp: 'p', 'p.order' | sort: 'order' -%}
    {%- assign unordered_posts = group.items | where_exp: 'p', 'p.order == nil' | sort_natural: 'title' -%}
    {%- assign same_day = ordered_posts | concat: unordered_posts -%}
    {%- assign posts_sorted = posts_sorted | concat: same_day -%}
  {%- endfor -%}
  {%- if posts_sorted and posts_sorted != empty -%}
    {%- for post in posts_sorted limit: 20 -%}
      <article class="preview">
        <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
        <p class="meta">
          <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
          {%- if post.tags and post.tags != empty -%} · {{ post.tags | join: " · " }}{%- endif -%}
        </p>
        <p class="excerpt">{{ post.excerpt | strip_html | normalize_whitespace | truncate: 160 }}</p>
      </article>
    {%- endfor -%}
  {%- else -%}
    <article class="preview">
      <h2>还没有文章</h2>
      <p class="meta">把 Markdown 放到 <code>_posts/</code>（文件名 <code>YYYY-MM-DD-title.md</code>）</p>
    </article>
  {%- endif -%}
</section>
